# 龙猫看板 (Longmao Kanban)

这是一个基于现代技术栈构建的全栈看板应用，类似于 Trello。项目采用了 Go (Gin) 作为后端，React (Vite + Tailwind) 作为前端，并使用 PostgreSQL 进行数据持久化。整个项目已经实现了高度的容器化和镜像优化，支持一键部署。

## 🛠 技术栈

### 后端 (Backend)
- **语言**: Go (Golang)
- **Web 框架**: Gin
- **ORM**: GORM
- **数据库**: PostgreSQL 15
- **特性**: RESTful API, 结构化日志, 跨域处理 (CORS)

### 前端 (Frontend)
- **框架**: React 18
- **构建工具**: Vite
- **样式**: Tailwind CSS
- **拖拽库**: @dnd-kit (支持无障碍访问和高性能拖拽)
- **图标**: Lucide React
- **HTTP 客户端**: Axios

### 基础设施 (Infrastructure)
- **容器化**: Docker
- **编排**: Docker Compose
- **Web 服务器**: Nginx (用于生产环境前端托管)
- **优化**:
  - 后端采用 Multi-stage 构建，最终镜像基于 `scratch`，体积极其精简 (~15MB)。
  - 前端构建后通过 Nginx Alpine Slim 镜像托管，体积小巧且高性能。

## ✨ 功能特性

1.  **看板管理**:
    -默认包含 "To Do", "In Progress", "Done" 三个状态列。
    - 界面居中布局，适配不同屏幕宽度。

2.  **任务交互 (Trello 风格)**:
    - **拖拽排序**: 支持任务卡片在不同列之间自由拖拽流转。
    - **行内添加**: 点击列底部的 "Add a card" 按钮，直接在当前位置展开文本框输入任务内容，无需弹窗。
    - **交互优化**: 文本框支持自动聚焦、回车提交、点击外部取消。

3.  **数据持久化**:
    - 所有任务数据实时保存至 PostgreSQL 数据库。
    - 容器重启后数据不丢失 (使用 Docker Volume)。

## 📂 目录结构

```
longmao/
├── backend/                # Go 后端源码
│   ├── config/            # 数据库配置
│   ├── controllers/       # API 控制器
│   ├── models/            # 数据模型结构
│   ├── routes/            # 路由定义
│   ├── main.go            # 入口文件
│   └── Dockerfile         # 后端构建文件 (Multi-stage)
├── frontend/               # React 前端源码
│   ├── src/
│   │   ├── components/    # 组件 (Column, Card, Board)
│   │   └── ...
│   └── Dockerfile         # 前端构建文件 (Nginx host)
├── docs/                   # 项目文档
│   └── ai_interaction_log.md # AI 交互开发记录
├── docker-compose.yml      # 容器编排配置
└── README.md               # 项目说明
```

## 🚀 快速开始 (Docker 方式 - 推荐)

这是最简单的运行方式，你需要安装 Docker 和 Docker Compose。

1.  **启动服务**:
    ```bash
    docker-compose up -d --build
    ```
    此命令会构建前端和后端镜像，并启动 PostgreSQL 数据库。

2.  **访问应用**:
    - 前端页面: [http://localhost:5173](http://localhost:5173)
    - 后端 API: [http://localhost:8080](http://localhost:8080)

3.  **查看日志**:
    ```bash
    docker-compose logs -f
    ```

4.  **停止服务**:
    ```bash
    docker-compose down
    ```

## 💻 本地开发指南

如果你想在本地进行调试开发：

### 1. 启动数据库
你可以单独使用 Docker 启动一个 Postgres 实例：
```bash
docker run --name longmao-db -e POSTGRES_USER=postgres -e POSTGRES_PASSWORD=postgres -e POSTGRES_DB=kanban -p 5432:5432 -d postgres:15-alpine
```

### 2.后端 (Backend)
```bash
cd backend
go mod download
# 确保数据库已运行，然后启动后端
go run main.go
```
后端服务将运行在 `http://localhost:8080`。

### 3. 前端 (Frontend)
```bash
cd frontend
npm install
npm run dev
```
前端开发服务器将运行在 `http://localhost:5173`。

## 🔌 API 接口概览

| 方法 | 路径 | 描述 |
|------|------|------|
| GET | `/api/cards` | 获取所有任务卡片 |
| POST | `/api/cards` | 创建新卡片 |
| PUT | `/api/cards/:id` | 更新卡片 (标题、描述) |
| PUT | `/api/cards/:id/move` | 移动卡片 (更新状态/位置) |
| DELETE | `/api/cards/:id` | 删除卡片 |

## 📝 开发记录

由于本项目是基于 AI 辅助编程完成的，完整的开发与交互过程日志已被记录在文档中。
查看详情: [AI Interaction Log](docs/ai_interaction_log.md)

---
Generated by GitHub Copilot (Gemini 3 Pro)
